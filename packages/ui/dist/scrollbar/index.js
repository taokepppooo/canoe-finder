(()=>{var W=(t,i=[])=>({parts:(...r)=>{if(wt(i))return W(t,r);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...r)=>W(t,[...i,...r]),rename:r=>W(r,i),keys:()=>i,build:()=>[...new Set(i)].reduce((r,e)=>Object.assign(r,{[e]:{selector:[`&[data-scope="${V(t)}"][data-part="${V(e)}"]`,`& [data-scope="${V(t)}"][data-part="${V(e)}"]`].join(", "),attrs:{"data-scope":V(t),"data-part":V(e)}}}),{})}),V=t=>t.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),wt=t=>t.length===0;var at=W("scrollbar").parts("root","content","xTrack","xThumb","yTrack","yThumb","scrollTrigger"),D=at.build();var Mt=t=>t.nodeType===Node.DOCUMENT_NODE,Ot=t=>t!=null&&t===t.window;function At(t){return Mt(t)?t:Ot(t)?t.document:t?.ownerDocument??document}function ct(t){let i={getRootNode:r=>r.getRootNode?.()??document,getDoc:r=>At(i.getRootNode(r)),getWin:r=>i.getDoc(r).defaultView??window,getActiveElement:r=>i.getDoc(r).activeElement,isActiveElement:(r,e)=>e===i.getActiveElement(r),getById:(r,e)=>i.getRootNode(r).getElementById(e),setValue:(r,e)=>{if(r==null||e==null)return;let n=e.toString();r.value!==n&&(r.value=e.toString())}};return{...i,...t}}var p=ct({getRootId:t=>t.ids?.root??`scrollbar:${t.id}`,getContentId:t=>t.ids?.content??`scrollbar:${t.id}:content`,getXTrackId:t=>t.ids?.xTrack??`scrollbar:${t.id}:x-track`,getXThumbId:t=>t.ids?.xThumb??`scrollbar:${t.id}:x-thumb`,getYTrackId:t=>t.ids?.yTrack??`scrollbar:${t.id}:y-track`,getYThumbId:t=>t.ids?.yThumb??`scrollbar:${t.id}:y-thumb`,getRootEl:t=>p.getById(t,p.getRootId(t)),getContentEl:t=>p.getById(t,p.getContentId(t)),getXTrackEl:t=>p.getById(t,p.getXTrackId(t)),getYTrackEl:t=>p.getById(t,p.getYTrackId(t)),getXThumbEl:t=>p.getById(t,p.getXThumbId(t)),getYThumbEl:t=>p.getById(t,p.getYThumbId(t))});function xt(t,i,r){let e=t.context.width,n=t.context.height,o="100%",s="100%",l=t.context?.xThumb?.show,h=t.context?.yThumb?.show,a=t.context?.xThumb?.hover,g=t.context?.yThumb?.hover,m=t.context?.xThumb?.width,y=t.context?.yThumb?.height,v=t.context?.xThumb?.offset,b=t.context?.yThumb?.offset;return{rootProps:r.element({...D.root.attrs,id:p.getRootId(t.context),dir:t.context.dir,style:{position:"relative",width:e,height:n}}),contentProps:r.element({...D.content.attrs,id:p.getContentId(t.context),dir:t.context.dir,style:{overflow:"auto",scrollbarWidth:"none",msOverflowStyle:"none",width:o,height:s},onMouseEnter:()=>{i("CONTENT_MOUSE_ENTER")},onMouseLeave:()=>{i("CONTENT_MOUSE_LEAVE")},onScroll:E=>{let O=E.target;i({type:"CONTENT_SCROLL",scrollLeft:O.scrollLeft,scrollTop:O.scrollTop})}}),xTrackProps:r.element({...D.xTrack.attrs,id:p.getXTrackId(t.context),dir:t.context.dir,"data-orientation":"horizontal",style:{position:"absolute",left:0,bottom:0,display:l?"block":"none",width:"100%",height:"5px",backgroundColor:"var(--cf-scrollbar-track-bg)"}}),xThumbProps:r.element({...D.xThumb.attrs,id:p.getXThumbId(t.context),dir:t.context.dir,"data-orientation":"horizontal",style:{position:"absolute",left:0,bottom:0,display:l?"block":"none",width:m,height:"5px",backgroundColor:a?"var(--cf-scrollbar-thumb-hover-bg)":"var(--cf-scrollbar-thumb-bg)",transform:`translateX(${v})`},onMouseEnter:()=>{i("X_THUMB_MOUSE_ENTER")},onMouseDown:E=>{E.preventDefault(),i("X_THUMB_MOUSE_DOWN")},onMouseLeave:()=>{i("X_THUMB_MOUSE_LEAVE")}}),yTrackProps:r.element({...D.yTrack.attrs,id:p.getYTrackId(t.context),dir:t.context.dir,"data-orientation":"vertical",style:{position:"absolute",top:0,right:0,display:h?"block":"none",width:"5px",height:"100%",backgroundColor:"var(--cf-scrollbar-track-bg)"}}),yThumbProps:r.element({...D.yThumb.attrs,id:p.getYThumbId(t.context),dir:t.context.dir,"data-orientation":"vertical",style:{position:"absolute",top:0,right:0,display:h?"block":"none",width:"5px",height:y,backgroundColor:g?"var(--cf-scrollbar-thumb-hover-bg)":"var(--cf-scrollbar-thumb-bg)",transform:`translateY(${b})`},onMouseEnter:()=>{i("Y_THUMB_MOUSE_ENTER")},onMouseDown:E=>{E.preventDefault(),i("Y_THUMB_MOUSE_DOWN")},onMouseLeave:()=>{i("Y_THUMB_MOUSE_LEAVE")}})}}var re=Symbol(),kt=Symbol();var lt=Object.getPrototypeOf,Z=new WeakMap,Nt=t=>t&&(Z.has(t)?Z.get(t):lt(t)===Object.prototype||lt(t)===Array.prototype);var ht=t=>Nt(t)&&t[kt]||null,Q=(t,i=!0)=>{Z.set(t,i)};var Y=!1,tt=t=>typeof t=="object"&&t!==null,L=new WeakMap,I=new WeakSet,_t=(t=Object.is,i=(a,g)=>new Proxy(a,g),r=a=>tt(a)&&!I.has(a)&&(Array.isArray(a)||!(Symbol.iterator in a))&&!(a instanceof WeakMap)&&!(a instanceof WeakSet)&&!(a instanceof Error)&&!(a instanceof Number)&&!(a instanceof Date)&&!(a instanceof String)&&!(a instanceof RegExp)&&!(a instanceof ArrayBuffer),e=a=>{switch(a.status){case"fulfilled":return a.value;case"rejected":throw a.reason;default:throw a}},n=new WeakMap,o=(a,g,m=e)=>{let y=n.get(a);if(y?.[0]===g)return y[1];let v=Array.isArray(a)?[]:Object.create(Object.getPrototypeOf(a));return Q(v,!0),n.set(a,[g,v]),Reflect.ownKeys(a).forEach(b=>{let E=Reflect.get(a,b);I.has(E)?(Q(E,!1),v[b]=E):E instanceof Promise?Object.defineProperty(v,b,{get(){return m(E)}}):L.has(E)?v[b]=j(E,m):v[b]=E}),Object.freeze(v)},s=new WeakMap,l=[1,1],h=a=>{if(!tt(a))throw new Error("object required");let g=s.get(a);if(g)return g;let m=l[0],y=new Set,v=(d,u=++l[0])=>{m!==u&&(m=u,y.forEach(f=>f(d,u)))},b=l[1],E=(d=++l[1])=>(b!==d&&!y.size&&(b=d,T.forEach(([u])=>{let f=u[1](d);f>m&&(m=f)})),m),O=d=>(u,f)=>{let S=[...u];S[1]=[d,...S[1]],v(S,f)},T=new Map,$=(d,u)=>{if(Y&&T.has(d))throw new Error("prop listener already exists");if(y.size){let f=u[3](O(d));T.set(d,[u,f])}else T.set(d,[u])},N=d=>{let u=T.get(d);u&&(T.delete(d),u[1]?.())},A=d=>(y.add(d),y.size===1&&T.forEach(([f,S],R)=>{if(Y&&S)throw new Error("remove already exists");let H=f[3](O(R));T.set(R,[f,H])}),()=>{y.delete(d),y.size===0&&T.forEach(([f,S],R)=>{S&&(S(),T.set(R,[f]))})}),J=Array.isArray(a)?[]:Object.create(Object.getPrototypeOf(a)),z=i(J,{deleteProperty(d,u){let f=Reflect.get(d,u);N(u);let S=Reflect.deleteProperty(d,u);return S&&v(["delete",[u],f]),S},set(d,u,f,S){let R=Reflect.has(d,u),H=Reflect.get(d,u,S);if(R&&(t(H,f)||s.has(f)&&t(H,s.get(f))))return!0;N(u),tt(f)&&(f=ht(f)||f);let X=f;if(!Object.getOwnPropertyDescriptor(d,u)?.set)if(f instanceof Promise)f.then(_=>{f.status="fulfilled",f.value=_,v(["resolve",[u],_])}).catch(_=>{f.status="rejected",f.reason=_,v(["reject",[u],_])});else{!L.has(f)&&r(f)&&(X=F(f));let _=!I.has(X)&&L.get(X);_&&$(u,_)}return Reflect.set(d,u,X,S),v(["set",[u],f,H]),!0}});s.set(a,z);let Tt=[J,E,o,A];return L.set(z,Tt),Reflect.ownKeys(a).forEach(d=>{let u=Object.getOwnPropertyDescriptor(a,d);u.get||u.set?Object.defineProperty(J,d,u):z[d]=a[d]}),z})=>[h,L,I,t,i,r,e,n,o,s,l],[Ct]=_t();function F(t={}){return Ct(t)}function et(t,i,r){let e=L.get(t);Y&&!e&&console.warn("Please use proxy object");let n,o=[],s=e[3],l=!1,a=s(g=>{if(o.push(g),r){i(o.splice(0));return}n||(n=Promise.resolve().then(()=>{n=void 0,l&&i(o.splice(0))}))});return l=!0,()=>{l=!1,a()}}function j(t,i){let r=L.get(t);Y&&!r&&console.warn("Please use proxy object");let[e,n,o]=r;return o(e,n(),i)}function nt(t){return I.add(t),t}function ut(t,i){Object.keys(i).forEach(n=>{if(Object.getOwnPropertyDescriptor(t,n))throw new Error("object property already defined");let o=i[n],{get:s,set:l}=typeof o=="function"?{get:o}:o,h={};h.get=()=>s(j(e)),l&&(h.set=a=>l(e,a)),Object.defineProperty(t,n,h)});let e=F(t);return e}function ft(t,i,r){typeof r.value=="object"&&(r.value=P(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||i==="__proto__"?Object.defineProperty(t,i,r):t[i]=r.value}function P(t){if(typeof t!="object")return t;var i=0,r,e,n,o=Object.prototype.toString.call(t);if(o==="[object Object]"?n=Object.create(t.__proto__||null):o==="[object Array]"?n=Array(t.length):o==="[object Set]"?(n=new Set,t.forEach(function(s){n.add(P(s))})):o==="[object Map]"?(n=new Map,t.forEach(function(s,l){n.set(P(l),P(s))})):o==="[object Date]"?n=new Date(+t):o==="[object RegExp]"?n=new RegExp(t.source,t.flags):o==="[object DataView]"?n=new t.constructor(P(t.buffer)):o==="[object ArrayBuffer]"?n=t.slice(0):o.slice(-6)==="Array]"&&(n=new t.constructor(t)),n){for(e=Object.getOwnPropertySymbols(t);i<e.length;i++)ft(n,e[i],Object.getOwnPropertyDescriptor(t,e[i]));for(i=0,e=Object.getOwnPropertyNames(t);i<e.length;i++)Object.hasOwnProperty.call(n,r=e[i])&&n[r]===t[r]||ft(n,r,Object.getOwnPropertyDescriptor(t,r))}return n||t}var Dt=Object.defineProperty,Lt=(t,i,r)=>i in t?Dt(t,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[i]=r,c=(t,i,r)=>(Lt(t,typeof i!="symbol"?i+"":i,r),r);function jt(t){for(;t.length>0;)t.pop();return t}var dt=(t,...i)=>(typeof t=="function"?t(...i):t)??void 0,x=t=>t,Pt=()=>{};var pt=(()=>{let t=0;return()=>(t++,t.toString(36))})(),Rt=()=>!1,q=t=>Array.isArray(t),B=t=>!(t==null||typeof t!="object"||q(t)),Vt=t=>typeof t=="number"&&!Number.isNaN(t),k=t=>typeof t=="string",it=t=>typeof t=="function",Ht=(t,i)=>Object.prototype.hasOwnProperty.call(t,i);function G(t){if(!Wt(t)||t===void 0)return t;let i=Reflect.ownKeys(t).filter(e=>typeof e=="string"),r={};for(let e of i){let n=t[e];n!==void 0&&(r[e]=G(n))}return r}var Wt=t=>t&&typeof t=="object"&&t.constructor===Object;function rt(...t){let i=t.length===1?t[0]:t[1],r=t.length===2?t[0]:!0}function K(...t){let i=t.length===1?t[0]:t[1],r=t.length===2?t[0]:!0}function mt(t,...i){for(let r of i){let e=G(r);for(let n in e)B(r[n])?(t[n]||(t[n]={}),mt(t[n],r[n])):t[n]=r[n]}return t}function gt(t){return P(t)}function w(t){return k(t)?{type:t}:t}function C(t){return t?q(t)?t.slice():[t]:[]}function yt(t){return B(t)&&t.predicate!=null}var It=()=>!0;function vt(t,i){return t=t??It,(r,e,n)=>{if(k(t)){let o=i[t];return it(o)?o(r,e,n):o}return yt(t)?t.predicate(i)(r,e,n):t?.(r,e,n)}}function ot(t,i){return(r,e,n)=>yt(t)?t.predicate(i)(r,e,n):t}function Ut(t){let i=t.computed??x({}),r=t.context??x({}),e=t.initial?t.states?.[t.initial]?.tags:[],n=F({value:t.initial??"",previousValue:"",event:x({}),previousEvent:x({}),context:ut(r,i),done:!1,tags:e??[],hasTag(o){return this.tags.includes(o)},matches(...o){return o.includes(this.value)},can(o){return x(this).nextEvents.includes(o)},get nextEvents(){let o=t.states?.[this.value]?.on??{},s=t?.on??{};return Object.keys({...o,...s})},get changed(){return this.event.value==="machine.init"||!this.previousValue?!1:this.value!==this.previousValue}});return x(n)}function U(t,i){return(r,e)=>{if(Vt(t))return t;if(it(t))return t(r,e);if(k(t)){let n=Number.parseFloat(t);if(!Number.isNaN(n))return n;if(i){let o=i?.[t];return K(o==null,`[@zag-js/core > determine-delay] Cannot determine delay for \`${t}\`. It doesn't exist in \`options.delays\``),it(o)?o(r,e):o}}}}function Bt(t){return k(t)?{target:t}:t}function $t(t,i){return(r,e,n)=>C(t).map(Bt).find(o=>vt(o.guard,i)(r,e,n)??o.target??o.actions)}var zt=class{constructor(t,i){c(this,"status","Not Started"),c(this,"state"),c(this,"initialState"),c(this,"initialContext"),c(this,"id"),c(this,"type","machine"),c(this,"activityEvents",new Map),c(this,"delayedEvents",new Map),c(this,"stateListeners",new Set),c(this,"doneListeners",new Set),c(this,"contextWatchers",new Set),c(this,"removeStateListener",Pt),c(this,"parent"),c(this,"children",new Map),c(this,"guardMap"),c(this,"actionMap"),c(this,"delayMap"),c(this,"activityMap"),c(this,"sync"),c(this,"options"),c(this,"config"),c(this,"start",e=>{if(this.state.value="",this.state.tags=[],this.status==="Running")return this;this.status="Running",this.removeStateListener=et(this.state,()=>{this.stateListeners.forEach(a=>{a(this.stateSnapshot)})},this.sync),this.setupContextWatchers(),this.executeActivities(w("machine.start"),C(this.config.activities),"machine.start"),this.executeActions(this.config.entry,w("machine.start"));let n=w("machine.init"),o=B(e)?e.value:e,s=B(e)?e.context:void 0;s&&this.setContext(s);let l={target:o??this.config.initial},h=this.getNextStateInfo(l,n);return this.initialState=h,this.performStateChangeEffects(this.state.value,h,n),this}),c(this,"setupContextWatchers",()=>{let{watch:e}=this.config;if(!e)return;let n=j(this.state.context),o=et(this.state.context,()=>{let s=j(this.state.context);for(let[l,h]of Object.entries(e))(this.options.compareFns?.[l]??Object.is)(n[l],s[l])||this.executeActions(h,this.state.event);n=s});this.contextWatchers.add(o)}),c(this,"stop",()=>{if(this.status!=="Stopped")return this.performExitEffects(this.state.value,w("machine.stop")),this.executeActions(this.config.exit,w("machine.stop")),this.setState(""),this.setEvent("machine.stop"),this.stopStateListeners(),this.stopChildren(),this.stopActivities(),this.stopDelayedEvents(),this.stopContextWatchers(),this.status="Stopped",this}),c(this,"stopStateListeners",()=>{this.removeStateListener(),this.stateListeners.clear()}),c(this,"stopContextWatchers",()=>{this.contextWatchers.forEach(e=>e()),this.contextWatchers.clear()}),c(this,"stopDelayedEvents",()=>{this.delayedEvents.forEach(e=>{e.forEach(n=>n())}),this.delayedEvents.clear()}),c(this,"stopActivities",e=>{e?(this.activityEvents.get(e)?.forEach(n=>n()),this.activityEvents.get(e)?.clear(),this.activityEvents.delete(e)):(this.activityEvents.forEach(n=>{n.forEach(o=>o()),n.clear()}),this.activityEvents.clear())}),c(this,"sendChild",(e,n)=>{let o=w(e),s=dt(n,this.contextSnapshot),l=this.children.get(s);l||K(`[@zag-js/core] Cannot send '${o.type}' event to unknown child`),l.send(o)}),c(this,"stopChild",e=>{this.children.has(e)||K(`[@zag-js/core > stop-child] Cannot stop unknown child ${e}`),this.children.get(e).stop(),this.children.delete(e)}),c(this,"removeChild",e=>{this.children.delete(e)}),c(this,"stopChildren",()=>{this.children.forEach(e=>e.stop()),this.children.clear()}),c(this,"setParent",e=>{this.parent=e}),c(this,"spawn",(e,n)=>{let o=dt(e);return n&&(o.id=n),o.type="machine.actor",o.setParent(this),this.children.set(o.id,x(o)),o.onDone(()=>{this.removeChild(o.id)}).start(),x(nt(o))}),c(this,"stopActivity",e=>{if(!this.state.value)return;let n=this.activityEvents.get(this.state.value);n?.get(e)?.(),n?.delete(e)}),c(this,"addActivityCleanup",(e,n,o)=>{e&&(this.activityEvents.has(e)?this.activityEvents.get(e)?.set(n,o):this.activityEvents.set(e,new Map([[n,o]])))}),c(this,"setState",e=>{this.state.previousValue=this.state.value,this.state.value=e;let n=this.getStateNode(e);e==null?jt(this.state.tags):this.state.tags=C(n?.tags)}),c(this,"setContext",e=>{e&&mt(this.state.context,G(e))}),c(this,"setOptions",e=>{let n=G(e);this.actionMap={...this.actionMap,...n.actions},this.delayMap={...this.delayMap,...n.delays},this.activityMap={...this.activityMap,...n.activities},this.guardMap={...this.guardMap,...n.guards}}),c(this,"getStateNode",e=>{if(e)return this.config.states?.[e]}),c(this,"getNextStateInfo",(e,n)=>{let o=this.determineTransition(e,n),s=!o?.target,l=o?.target??this.state.value,h=this.state.value!==l,a=this.getStateNode(l),m={reenter:!s&&!h&&!o?.internal,transition:o,stateNode:a,target:l,changed:h};return this.log("NextState:",`[${n.type}]`,this.state.value,"---->",m.target),m}),c(this,"getAfterActions",(e,n)=>{let o;return{entry:()=>{o=globalThis.setTimeout(()=>{let s=this.getNextStateInfo(e,this.state.event);this.performStateChangeEffects(this.state.value,s,this.state.event)},n)},exit:()=>{globalThis.clearTimeout(o)}}}),c(this,"getDelayedEventActions",e=>{let n=this.getStateNode(e),o=this.state.event;if(!n||!n.after)return;let s=[],l=[];if(q(n.after)){let h=this.determineTransition(n.after,o);if(!h)return;if(!Ht(h,"delay"))throw new Error(`[@zag-js/core > after] Delay is required for after transition: ${JSON.stringify(h)}`);let g=U(h.delay,this.delayMap)(this.contextSnapshot,o),m=this.getAfterActions(h,g);return s.push(m.entry),l.push(m.exit),{entries:s,exits:l}}if(B(n.after))for(let h in n.after){let a=n.after[h],m=U(h,this.delayMap)(this.contextSnapshot,o),y=this.getAfterActions(a,m);s.push(y.entry),l.push(y.exit)}return{entries:s,exits:l}}),c(this,"executeActions",(e,n)=>{let o=ot(e,this.guardMap)(this.contextSnapshot,n,this.guardMeta);for(let s of C(o)){let l=k(s)?this.actionMap?.[s]:s;rt(k(s)&&!l,`[@zag-js/core > execute-actions] No implementation found for action: \`${s}\``),l?.(this.state.context,n,this.meta)}}),c(this,"executeActivities",(e,n,o)=>{for(let s of n){let l=k(s)?this.activityMap?.[s]:s;if(!l){rt(`[@zag-js/core > execute-activity] No implementation found for activity: \`${s}\``);continue}let h=l(this.state.context,e,this.meta);if(h){let a=k(s)?s:s.name||pt();this.addActivityCleanup(o??this.state.value,a,h)}}}),c(this,"createEveryActivities",(e,n)=>{if(e)if(q(e)){let o=C(e).find(a=>{let g=a.delay,y=U(g,this.delayMap)(this.contextSnapshot,this.state.event);return vt(a.guard,this.guardMap)(this.contextSnapshot,this.state.event,this.guardMeta)??y!=null});if(!o)return;let l=U(o.delay,this.delayMap)(this.contextSnapshot,this.state.event);n(()=>{let a=globalThis.setInterval(()=>{this.executeActions(o.actions,this.state.event)},l);return()=>{globalThis.clearInterval(a)}})}else for(let o in e){let s=e?.[o],h=U(o,this.delayMap)(this.contextSnapshot,this.state.event);n(()=>{let g=globalThis.setInterval(()=>{this.executeActions(s,this.state.event)},h);return()=>{globalThis.clearInterval(g)}})}}),c(this,"setEvent",e=>{this.state.previousEvent=this.state.event,this.state.event=nt(w(e))}),c(this,"performExitEffects",(e,n)=>{let o=this.state.value;if(o==="")return;let s=e?this.getStateNode(e):void 0;this.stopActivities(o);let l=ot(s?.exit,this.guardMap)(this.contextSnapshot,n,this.guardMeta),h=C(l),a=this.delayedEvents.get(o);a&&h.push(...a),this.executeActions(h,n)}),c(this,"performEntryEffects",(e,n)=>{let o=this.getStateNode(e),s=C(o?.activities);this.createEveryActivities(o?.every,g=>{s.unshift(g)}),s.length>0&&this.executeActivities(n,s);let l=ot(o?.entry,this.guardMap)(this.contextSnapshot,n,this.guardMeta),h=C(l),a=this.getDelayedEventActions(e);o?.after&&a&&(this.delayedEvents.set(e,a?.exits),h.push(...a.entries)),this.executeActions(h,n),o?.type==="final"&&(this.state.done=!0,this.doneListeners.forEach(g=>{g(this.stateSnapshot)}),this.stop())}),c(this,"performTransitionEffects",(e,n)=>{let o=this.determineTransition(e,n);this.executeActions(o?.actions,n)}),c(this,"performStateChangeEffects",(e,n,o)=>{this.setEvent(o);let s=n.changed||n.reenter;s&&this.performExitEffects(e,o),this.performTransitionEffects(n.transition,o),this.setState(n.target),s&&this.performEntryEffects(n.target,o)}),c(this,"determineTransition",(e,n)=>$t(e,this.guardMap)?.(this.contextSnapshot,n,this.guardMeta)),c(this,"sendParent",e=>{this.parent||K("[@zag-js/core > send-parent] Cannot send event to an unknown parent");let n=w(e);this.parent?.send(n)}),c(this,"log",(...e)=>{Rt()&&this.options.debug&&console.log(...e)}),c(this,"send",e=>{let n=w(e);this.transition(this.state.value,n)}),c(this,"transition",(e,n)=>{let o=k(e)?this.getStateNode(e):e?.stateNode,s=w(n);if(!o&&!this.config.on){let a=this.status==="Stopped"?"[@zag-js/core > transition] Cannot transition a stopped machine":`[@zag-js/core > transition] State does not have a definition for \`state\`: ${e}, \`event\`: ${s.type}`;rt(a);return}let l=o?.on?.[s.type]??this.config.on?.[s.type],h=this.getNextStateInfo(l,s);return this.performStateChangeEffects(this.state.value,h,s),h.stateNode}),c(this,"subscribe",e=>(this.stateListeners.add(e),this.status==="Running"&&e(this.stateSnapshot),()=>{this.stateListeners.delete(e)})),c(this,"onDone",e=>(this.doneListeners.add(e),this)),c(this,"onTransition",e=>(this.stateListeners.add(e),this.status==="Running"&&e(this.stateSnapshot),this)),this.config=gt(t),this.options=gt(i??{}),this.id=this.config.id??`machine-${pt()}`,this.guardMap=this.options?.guards??{},this.actionMap=this.options?.actions??{},this.delayMap=this.options?.delays??{},this.activityMap=this.options?.activities??{},this.sync=this.options?.sync??!1,this.state=Ut(this.config),this.initialContext=j(this.state.context);let r=w("machine.created");this.executeActions(this.config?.created,r)}get stateSnapshot(){return x(j(this.state))}getState(){return this.stateSnapshot}get contextSnapshot(){return this.stateSnapshot.context}get self(){let t=this;return{id:this.id,send:this.send.bind(this),sendParent:this.sendParent.bind(this),sendChild:this.sendChild.bind(this),stop:this.stop.bind(this),stopChild:this.stopChild.bind(this),spawn:this.spawn.bind(this),stopActivity:this.stopActivity.bind(this),get state(){return t.stateSnapshot},get initialContext(){return t.initialContext},get initialState(){return t.initialState?.target??""}}}get meta(){return{state:this.stateSnapshot,guards:this.guardMap,send:this.send.bind(this),self:this.self,initialContext:this.initialContext,initialState:this.initialState?.target??"",getState:()=>this.stateSnapshot,getAction:t=>this.actionMap[t],getGuard:t=>this.guardMap[t]}}get guardMeta(){return{state:this.stateSnapshot}}get[Symbol.toStringTag](){return"Machine"}},Et=(t,i)=>new zt(t,i);function st(t){if(!Xt(t)||t===void 0)return t;let i=Reflect.ownKeys(t).filter(e=>typeof e=="string"),r={};for(let e of i){let n=t[e];n!==void 0&&(r[e]=st(n))}return r}var Xt=t=>t&&typeof t=="object"&&t.constructor===Object;function Yt(t){let i=st(t);return Et({id:"scrollbar",initial:"idle",context:{width:"100%",height:"100%",scrollWidth:0,scrollHeight:0,xThumb:{width:0,hasScroll:!1,offset:0,dragging:!1},yThumb:{height:0,hasScroll:!1,offset:0,dragging:!1},top:0,left:0,lastScrollTop:0,lastScrollLeft:0,...i},activities:["setInitialSize"],states:{idle:{on:{CONTENT_MOUSE_ENTER:{target:"focused",actions:["invokeContentMouseEnter"]}}},focused:{on:{CONTENT_MOUSE_LEAVE:{target:"idle",actions:["invokeContentMouseLeave"]},CONTENT_SCROLL:{actions:["invokeContentScroll"]},X_THUMB_MOUSE_ENTER:{target:"scroll-hover",actions:["invokeXThumbMouseEnter"]},Y_THUMB_MOUSE_ENTER:{target:"scroll-hover",actions:["invokeYThumbMouseEnter"]}}},"scroll-hover":{on:{CONTENT_MOUSE_LEAVE:{target:"idle",actions:["invokeContentMouseLeave"]},X_THUMB_MOUSE_DOWN:{target:"scroll-drag",actions:["invokeDragHorizontalScroll"]},X_THUMB_MOUSE_LEAVE:{target:"focused",actions:["invokeXThumbMouseLeave"]},Y_THUMB_MOUSE_DOWN:{target:"scroll-drag",actions:["invokeDragVerticalScroll"]},Y_THUMB_MOUSE_LEAVE:{target:"focused",actions:["invokeYThumbMouseLeave"]}}},"scroll-drag":{on:{X_THUMB_DRAG_MOUSE_LEAVE:{target:"focused",actions:["invokeXThumbMouseLeave"]},Y_THUMB_DRAG_MOUSE_LEAVE:{target:"focused",actions:["invokeYThumbMouseLeave"]}}}}},{activities:{setInitialSize(r){let e=p.getContentEl(r);if(r.width=e.clientWidth,r.height=e.clientHeight,r.scrollWidth=e.scrollWidth,r.scrollHeight=e.scrollHeight,r.scrollWidth>r.width){r.xThumb.hasScroll=!0;let o=`${r.width/r.scrollWidth*100}%`;r.xThumb.width=o}if(r.scrollHeight>r.height){r.yThumb.hasScroll=!0;let o=`${r.height/r.scrollHeight*100}%`;r.yThumb.height=o}}},actions:{invokeContentMouseEnter(r){r.xThumb.hasScroll&&(r.xThumb.show=!0,M.invokeVerticalScroll(r)),r.yThumb.hasScroll&&(r.yThumb.show=!0,M.invokeHorizontalScroll(r))},invokeContentMouseLeave(r){r.xThumb.show=!1,r.yThumb.show=!1},invokeContentScroll(r,e){let n=e.scrollTop,o=e.scrollLeft;n!==r.lastScrollTop&&M.invokeVerticalScroll(r),o!==r.lastScrollLeft&&M.invokeHorizontalScroll(r),r.lastScrollTop=n,r.lastScrollLeft=o},invokeVerticalScroll(r){M.invokeVerticalScroll(r)},invokeDragVerticalScroll(r,e,{send:n}){r.yThumb.dragging=!0,M.invokeDragVerticalScroll(r,e,n)},invokeHorizontalScroll(r){M.invokeHorizontalScroll(r)},invokeDragHorizontalScroll(r,e,{send:n}){r.xThumb.dragging=!0,M.invokeDragHorizontalScroll(r,e,n)},invokeXThumbMouseEnter(r){r.xThumb.hover=!0},invokeYThumbMouseEnter(r){r.yThumb.hover=!0},invokeXThumbMouseLeave(r){r.xThumb.hover=!1},invokeYThumbMouseLeave(r){r.yThumb.hover=!1}}})}var bt=(t,i)=>{let r=p.getContentEl(t),e=i==="vertical",n=e?t.top:t.left,o=e?"scrollTop":"scrollLeft",s=e?t.yThumb:t.xThumb,l=e?"clientHeight":"clientWidth";t[n]=r[o],s.offset=`${t[n]/r[l]*100}%`},St=(t,i,r,e)=>{let n=i==="vertical",o=n?t.yThumb:t.xThumb;if(!o.dragging)return;let s=!0,l=0,h=0,a=p.getWin(t),g=p.getContentEl(t),m=n?p.getYTrackEl(t):p.getXTrackEl(t),y=n?p.getYThumbEl(t):p.getXThumbEl(t),v=m.getBoundingClientRect()[n?"top":"left"],b=m[n?"clientHeight":"clientWidth"],E=y[n?"clientHeight":"clientWidth"],O=b-E,T=N=>{let A=n?N.clientY:N.clientX;s&&(l=A-y.getBoundingClientRect()[n?"top":"left"],s=!1),A>v+O+l?h=O:A<0?h=0:h=A-v-l,!(h<0||h>O)&&(o.offset=`${h}px`,g[n?"scrollTop":"scrollLeft"]=h/b*(n?t.scrollHeight:t.scrollWidth))},$=N=>{o.dragging=!1;let A=p.getWin(t);A.document.removeEventListener("mousemove",T),A.document.removeEventListener("mouseup",$),n?M.invokeDragVerticalScrollStop(t,N,e):M.invokeDragHorizontalScrollStop(t,N,e)};a.document.addEventListener("mousemove",T),a.document.addEventListener("mouseup",$)},M={invokeVerticalScroll:t=>bt(t,"vertical"),invokeHorizontalScroll:t=>bt(t,"horizontal"),invokeDragVerticalScroll:(t,i,r)=>{St(t,"vertical",i,r)},invokeDragHorizontalScroll:(t,i,r)=>{St(t,"horizontal",i,r)},invokeDragVerticalScrollStop:(t,i,r)=>{r("Y_THUMB_DRAG_MOUSE_LEAVE")},invokeDragHorizontalScrollStop:(t,i,r)=>{r("X_THUMB_DRAG_MOUSE_LEAVE")}};})();
